
## 1
```bash
#  git init
git add .gitignore
git commit -m "build: set gitignore files"

git add .editorconfig
git commit -m "build: add editorconfig"

git add .gitattributes
git commit -m "build: add gitattributes"

git add LICENSE*
git commit -m "docs: add LICENSE file"

git add rustfmt.toml
git commit -m "build: add code format config"

git add docs/*.md
git commit -m "docs: add note for development"


```



## 2 | code source file
```bash

git add Cargo.toml;
# git add src/utils/*;
git add src/lib.rs;
git add src/main.rs;
# git commit -m "build: code source file"
git commit -m "feat: get value with field path"
git commit -m "feat: field path support array"

# git commit -m "build: code utils module"

git add scripts/*;
git add src/*;
git add Cargo.toml;
git add README*.md
git commit -m "refactor: use i_edit_toml to replace toml_path"



git add Cargo.toml;
git add README*.md
git commit -m "build: fix github repo url"

git add Cargo.toml;git add README*.md;git commit -m "bump version v0.3.0";

git add Cargo.toml
git add src/utils/*
git add src/lib.rs
git add src/main.rs
# git commit -m "build: code utils module"
git commit -m "build: pass utils module"

git add Cargo.toml
git add src/alias/*
git add src/lib.rs
git add src/main.rs
# git commit -m "build: code alias module"
git commit -m "build: pass alias module"


git add Cargo.toml
git add src/config/*
git add src/lib.rs
git add src/main.rs
# git commit -m "build: code config module"
git commit -m "build: pass config module"

git add Cargo.toml
git add src/nodes/*
git add src/lib.rs
git add src/main.rs
git commit -m "build: code nodes module"
# git commit -m "build: pass nodes module"

git add Cargo.toml
git add src/nodes/*
git add src/lib.rs
git add src/main.rs
git commit -m "build: code basic window nodes"

git add Cargo.toml
git add src/engine/*
git add src/lib.rs
git add src/main.rs
git commit -m "build: code engine module"

# 修复以下内容：
# 别名映射冲突
# 正则表达式测试
# 移除未使用导入

git add Cargo.toml
git add src/*
git commit -m "build: pass engine module"

git add Cargo.toml
git add src/*
git add workflows/window_list_demo.yaml
git commit -m "build: pass demo worflow running"

git add Cargo.toml
git add src/nodes/*
git add workflows/window_list_demo.yaml
git commit -m "build: align window list args"

git add Cargo.toml
git add src/*
git commit -m "build: system logging off/on control"

git add Cargo.toml
git add src/*
git add workflows/window_list_demo.yaml
git commit -m "build: support yaml format output"

git add Cargo.toml
git add src/*
git add workflows/window_sort_demo.yaml
git commit -m "build: support window sort demo"


git add Cargo.toml
git add src/*
git add workflows/window_format*.yaml
git commit -m "build: support window format demo"

git add Cargo.toml
git add src/*
git add workflows/window_sort*.yaml
git commit -m "feat: optimize window sorting input parameters"
# 优化窗口排序输入参数

git add Cargo.toml
git add src/*
git add workflows/window_pipeline*.yaml
git commit -m "feat: use input parameter direct_output"

# optimize window list,sort,and format nodes
git add Cargo.toml
git add src/*
git add workflows/window_pipeline*.yaml
git add workflows/window_template*.yaml
git commit -m "refactor: optimize window list,sort,and format nodes"

git add Cargo.toml
git add src/*
git add workflows/window_pipeline*.yaml
git add workflows/window_select_demo*.yaml
git commit -m "feat: support window select node"


git add Cargo.toml
git add src/*
git add workflows/window_layout*.yaml
git commit -m "feat: support window layout node"


git add Cargo.toml
git add src/*
git add workflows/window_mouse_position_get*.yaml
git commit -m "feat: support window mouse position node"

git add Cargo.toml
git add src/nodes/window_mouse_position_get*

git commit -m "bug: fix window mouse position in client rect"


git add Cargo.toml
git add src/nodes/window_mouse_position_get*
# use client_x,client_y,window_x,window_yscreen_x,screen_y tempalte vars
git commit -m "feat: add tempalte vars"

git add Cargo.toml
git add src/*
git add workflows/window_mouse_click*.yaml
git commit -m "feat: support window mouse click node"


git add Cargo.toml
git add src/*
git add workflows/window_keyboard*.yaml
git commit -m "feat: support window keyboard press,release,type node"


git add Cargo.toml
git add src/*
git add workflows/window_keyboard*.yaml
git commit -m "feat: enhance window keyboard type node input"

# 1. 灵活的分隔符,智能的回退机制
git add Cargo.toml
git add src/*
git add workflows/window_keyboard*.yaml
git commit -m "feat: flexible delimiters with smart fallback mechanism"

# 修复变量定义节点
git add Cargo.toml
git add src/*
git add workflows/window_keyboard*.yaml
git commit -m "fix: correct variable definition in node implementation"

# 使用窗口 index_filter 来过滤窗口
git add Cargo.toml
git add src/*
git add workflows/window_keyboard*.yaml
git commit -m "feat: use window index_filter to filter windows"

git add Cargo.toml
git add src/*
git commit -m "build: code window color get node"

# 拆分优化颜色节点
# 代码复用
git add Cargo.toml
git add src/*
git commit -m "refactor: split and optimize color nodes for better code reuse"

git add Cargo.toml
git add src/*
git commit -m "refactor: split and optimize color nodes for better code reuse"

# 拆分优化颜色节点
# 单一职责
# 操作分离
# 依赖清晰
git add Cargo.toml
git add src/*
git commit -m "refactor: split and optimize color nodes with single responsibility, operation separation and clear dependencies"

# 拆分优化颜色节点

git add Cargo.toml
git add src/*
git commit -m "refactor: move get_window_color to window  get node"

# 统一使用共同逻辑解析窗口句柄 window_handle_parser
git add Cargo.toml
git add src/*
git commit -m "refactor: unified window handle parsing using shared window_handle_parser logic"

git add Cargo.toml
git add src/*
git commit -m "refactor: unified coordinate input parsing using shared coordinate_parser logic"


git add Cargo.toml
git add src/nodes/input_processing*
git commit -m "refactor: unified input process using shared input process logic"


git add Cargo.toml
git add src/nodes/env_config*
git commit -m "feat: load config from env file"

# 自动指定节点输出
git add Cargo.toml
git add src/*
git commit -m "feat: auto-bind node outputs from configuration"

git add Cargo.toml
git add src/nodes/window_color*
git add src/nodes/window_handle_parser*
git add src/nodes/mod.rs
git add src/nodes/separator_parser.rs
git commit -m "refactor: unified input and result of window color nodes"

git add Cargo.toml
git add src/engine
git add src/main.rs
git add src/config
git add src/alias
git add src/nodes/mod.rs
git commit -m "feat: support workflow_scheduler"

git add Cargo.toml
git add src/nodes/action_sleep*
git add src/nodes/condition_if*
git add src/nodes/loop_for*

git add src/nodes/mod.rs
git commit -m "feat: support logic control nodes"

```

## 节点别名支持忽略大小写
- 节点别名支持忽略大小写
    - 所有别名统一转为小写存储
```powershell
git add Cargo.toml
git add src
git commit -m "build: node aliases support case insensitivity"
```

## 节点| console_output | 输入输出处理逻辑
- 修正输入输出处理逻辑
```powershell
git add Cargo.toml
git add src
git commit -m "fix: console_output input/output processing logic"

git add Cargo.toml
git add src
git commit -m "style: format code"

git add workflows/demo/console_output.yaml
git commit -m "docs: add console_output demo"

git add Cargo.toml
git add src
git add workflows/demo/console_output.yaml
git commit -m "feat: console_output allow empty_value_mode"
# git commit -m "docs: add console_output demo"

git add Cargo.toml
git add src
git add workflows/demo/console_output.yaml
git commit -m "feat: console_output allow inputs with empty input"

git add Cargo.toml
git add src
git commit -m "build: update window index filter"

# 参考 console_output 处理逻辑更新 color_match
git add Cargo.toml
git add src
git add workflows/demo/color_match.yaml
git commit -m "feat: color_match processing logic with reference to console_output"

git add Cargo.toml
git add src
git add workflows/demo/window_color_get.yaml
git commit -m "feat: window_color_get processing logic with reference to console_output"

git add Cargo.toml
git add src
git add workflows/demo/window_key_press.yaml
git commit -m "feat: window_key_press processing logic with reference to console_output"

git add Cargo.toml
git add src/bin
git commit -m "chore: put code packer"

git add Cargo.toml
git add src
git commit -m "feat: support window_input_sequence node"

# 添加新的参数节点
# 动态参数解析	解析引用，支持默认值，连接其他节点
# Dynamic parameter parsing - Resolves references, supports default values, connects with other nodes
git add Cargo.toml
git add src/nodes/mod.rs
git add src/nodes/parameter_resolver.rs
git add src/alias/mapping.rs
git commit -m "feat: support parameter_resolver node"

git add Cargo.toml
git add src/nodes
git add src/alias
git commit -m "feat: support print_trait trait and data_selector node"

# 更新代码以便测试通过
git add src/config
git commit -m "test: code for test passing"

git add src/nodes/window_mouse_position_get.rs
git commit -m "feat: use print_trait"

git add src/nodes
git commit -m "feat: window color get node use print_trait"

git add workflows/mouse_color_monitor.yaml
git commit -m "docs: add demo of mouse color monitor"

git add src/nodes/print_trait.rs
git commit -m "feat: add print_inputs and show_inputs in print_trait for node"

git add src/nodes/window_mouse_position_get.rs
git commit -m "refactor: use index_filter and simple logic"

# 提取 empty value mode 为单一模块
git add src/nodes
git commit -m "refactor: extract empty value mode into a single module"

git add src/nodes
git commit -m "code: let build and test passing"

git add src/nodes
git commit -m "chore: add conditon filter"

# 添加返回 返回一个 含有 "true|false|..." 文本的结果
git add src/nodes
git commit -m "chore: add func to return filter result text"

git add src/nodes
git commit -m "chore: add trait to make filterable node"

git add src/nodes
git commit -m "chore: add node as filter node"

git add src/nodes
git commit -m "chore: refactor get filter result"

git add src/nodes
git commit -m "refactor: use filterable_node and print_trait"


```

## 节点 提取公共实现 - get_help
- 在 AutomationNode 上添加一个 get_help 方法，返回一个字符串，包含节点的输入和输出名字列表。名字间以英文逗号作为分隔符。输入和输出间以英文分号作为分隔符。
- 以便各自 节点 根据自己的需要节点是否输出帮助信息。但又不用在各自节点都实现一个 get_help 方法。
```powershell
git add Cargo.toml
git add src/nodes/mod.rs
git commit -m "feat: add get_help fn on AutomationNode"

```

## 节点跳过
- 引擎层面统一处理跳过逻辑
```powershell
git add Cargo.toml
git add src
git commit -m "build: node aliases support case insensitivity"
```


```bash
# delete todel files 
rm -r docs/todel*
# sh -c "rm *todel*"


# Get Git user and email
git config user.name
git config user.email

# simple crate
# git add src Cargo.toml
# git commit -m "build: code source"

git add scripts/
git commit -m "build: add scritps"

# workspace
# git add crates/
# git commit -m "build: set app construtor"

# workspace
# git add Cargo.toml
# git commit -m "build: set app construtor"

#  Cargo.lock README.md

# git add Dockerfile.minimal
# git commit -m "build: add minimal dockerfile for alpine"




git add .docker*
git add Dockerfile*
git commit -m "build: add docker file"

git add scripts/*
git commit -m "build: add scripts file"

git add src/*
git add Cargo.toml
git commit -m "build: code source file"

git add .github/workflows/*
git commit -m "build: add github workflow files"


git add .github/workflows/*
git commit -m "build: put base name"
# git add src/*
# git commit -m "docs: add docs note"

git add README*md
git commit -m "docs: add readme file"

git add README*md
git commit -m "build: use shields"
# 

# git add Cargo.toml
# git commit -m "build: set document position"

# git add README.md
# git commit -m "docs: delete unused text"

git add src/*
git add Cargo.toml
git commit -m "refactor: allow optional features"

# 无需导入 trait

git add src/*
git add Cargo.toml
git commit -m "refactor: to_code or from_str without import trait"



git add README*md
git commit -m "docs: put readme file"

git add src/*
git add Cargo.toml
git commit -m "refactor: use core,parser and smart modules"


# 修复 clone 调用
git add src/*
git add Cargo.toml
git commit -m "refactor: fix clone call"

git add README.md
git commit -m "docs: put readme file"

git add scripts/*
git commit -m "docs: put scripts docs"


# 修复循环依赖
git add src/*
git add Cargo.toml
git commit -m "refactor: fix circular dependencies"

git add scripts/*
git commit -m "build: add change log scripts"

git add scripts/*
git commit -m "build: put change log scripts"
# git add passwords.example.md
# git commit -m "docs: add example file"

git add .github/workflows/crate-publish-s.yml
git commit -m "build: add crate publish workflow"

git add .github/workflows/crate-publish-s.yml
git commit -m "build: use window os"

git add .github/workflows/crate-publish.yml
git commit -m "build: disable tag"

# 修复语法错误

git add .github/workflows/crate-publish-s.yml
git commit -m "build: fix syntax errors"

git add .github/workflows/crate-publish-s.yml
git commit -m "build: put quality report"

git add .github/workflows/crate-publish-s.yml
git commit -m "build: add bash shell in window os"

git add .github/workflows/crate-publish-s.yml
git commit -m "build: publish in window os"


git add Cargo.toml
git commit -m "build: only 5 keywords allowed!"
# expected at most 5 keywords per crate

### 通过格式化
git add src/*
git commit -m "build: format code"

### 通过质量检
git add src/*
git commit -m "build: lint code"
# cargo fmt ;cargo fmt -- --check;cargo clippy -- -D warnings;

git add rustfmt.toml
git commit -m "build: set rustfmt config"

### 通过特性测试
git add src/*
git commit -m "build: test code"
# cargo test --all-features 


git add examples
git commit -m "docs: add examples"


git add src/*
git add Cargo.toml
git commit -m "build: pass code quality in local"


git add src/*
git add Cargo.toml
git commit -m "build: use valid category slugs for crate.io"

git add .github/workflows/crate-publish-s.yml
git add Cargo.toml
git commit -m "build: set release config"


git add scripts/*.md
git commit -m "docs: put scripts docs"

git add src/*
git add Cargo.toml
git commit -m "build: put for docs build"



git add Cargo.toml
git commit -m "build: only 5 keywords allowed!"
# expected at most 5 keywords per crate

git add README.md
git add user-case.why.zh.md
git commit -m "docs: add use case"

# 
git add src/*
git add Cargo.toml
git add README.md
git commit -m "feat: seamless compatibility with the windows crate"

git add src/*
git add Cargo.toml
git add README.md
git commit -m "build: put version"



git add docs/起名*.md
git commit -m "docs: add name docs"

git add docs/读我*.md
git commit -m "docs: add readme history"

git add docs/托管*.md
git commit -m "docs: add github docs"

git add docs/版本*.md
git commit -m "docs: add git docs"

git add docs/ask.for.ai.md
git commit -m "docs: add ai docs"

git add .github/workflows/*.yml
git commit -m "build: use window release"

git add docs/模块*.md
git commit -m "docs: add modules docs"

git add src
git add README*.md
git commit -m "build: spilt main.rs to modules"

git add src
git add README*.md
git commit -m "feat: add windows/get command for information including size and position"

git add src
git add README*.md
git commit -m "feat: add windows/{minimize,maximize,restore} command"

git add .github/workflows/*.yml
git commit -m "build: use window release"

git add src
git add README*.md
git commit -m "perf: extract cli builder helper functions"
# 使用两种方案结合
# git commit --amend -m "perf: use a combination of both approaches"

# 合并main窗口操作处理

git add src
git commit -m "perf: merge main window operations handling"

git add src
git commit -m "perf: use a combination of both approaches"

# 输出系统重构
git add src
git commit -m "perf: output system refactoring"

# 平台抽象改进
git add src
git add Cargo.toml
git commit -m "perf: platform abstraction improvements"


git add docs/合并*.md
git add docs/平台*.md
git add docs/提取*.md
git add docs/*输出*.md
git commit -m "docs: add perf docs"

git add src/cli.rs
git add src/main.rs
git commit -m "feat: support sort for windows/get command"

git add src
git commit -m "build: delete unused code"

git add src
git commit -m "feat: add windows/position/set command"

git add src
git commit -m "refactor: extract sorting module to one file"

git add src
git commit -m "build: comment unused code"

git add src
git commit -m "refactor: extract position_utils module to one file"

git add src
git commit -m "refactor: no circular dependencies"

git add src
git commit -m "refactor: sorting system with unified Sortable trait, SortConfig management, performance optimizations, and backward compatibility"

git add src
git add Cargo.toml
git commit -m "refactor: no circular dependencies"

git add src
git add Cargo.toml
git commit -m "feat: window always-on-top feature in a pluggable way"

# 插拔式添加窗口置顶功能
# plug-and-play window always-on-top feature

# 以易于插拔的方式添加窗口置顶功能
# add window always-on-top feature in a pluggable way

git add src
git add Cargo.toml
git commit -m "feat: window always-on-top feature in a pluggable way"

# 以易于插拔的方式添加窗口透明度功能
# Add window transparency feature in a pluggable way
git add src
git add Cargo.toml
git commit -m "feat: window transparency feature in a pluggable way"

# 使用统一的错误处理
# implement unified error handling
git add src
git add Cargo.toml
git commit -m "refactor: implement unified error handling"

# 使用外部thiserror依赖 重写 error 模块 
git add src
git commit -m "refactor: error module using thiserror crate"

# 改进特性检测和注册
git add src/features
git commit -m "refactor: improve feature detection and registration"

git add src/features
git commit -m "refactor: rename subcommand to windows/always-on-top"

git add Cargo.toml
git commit -m "refactor: error module using thiserror crate"

git add src
git commit -m "feat: add detailed error message"

git add src
git add Cargo.toml
git commit -m "feat: windows/position/set feature in a pluggable way"

git add src
git add Cargo.toml
git commit -m "feat: windows minimize/maximize/restore feature in a pluggable way"

git add src
git add Cargo.toml
git commit -m "feat: windows/get in a pluggable way"

# 让 "windows/transparency" 子命令 支持 --index,--all,--sort-position 参数

git add src
git add Cargo.toml
git commit -m "feat: windows/transparency support index,all,sort-position"

git add src
git add Cargo.toml
git commit -m "feat: windows/always-on-top support index,all,sort-position"

git add src
git add Cargo.toml
git commit -m "feat: windows minimize/maximize/restore support index,all,sort-position"

git add src
git add Cargo.toml
git commit -m "feat: windows/get support index,all,sort-pid,sort-position"

git add src
git add Cargo.toml
git commit -m "feat: windows/resize feature in a pluggable way"

# 对utils模块进行细分
git add src
git add Cargo.toml
git commit -m "refactor: refine the utils module"

git add src
git add Cargo.toml
git commit -m "feat: windows/screenshot feature in a pluggable way"

# 清理 main.rs 中的重复逻辑
# 
git add src
git add Cargo.toml
git commit -m "perf: clean up duplicate logic in main.rs"

# 改进特性注册
git add src
git add Cargo.toml
git commit -m "refactor: improve feature registration with macros"

git add src
git add Cargo.toml
git commit -m "build: extract cli builder helper functions"

# 
git add src
git add Cargo.toml
git commit -m "refactor: use cli builder helper to clean up windows/always-on-top"
# 避免在参数未定义时尝试访问
git add src
git add Cargo.toml
git commit -m "fix: avoid accessing parameters when they are undefined"

# 拆分 windows 模块
git add src
git add Cargo.toml
git commit -m "refactor: split windows module"
# perf,refactor,feat,chore,build

# 移除未使用的引入
git add src
git add Cargo.toml
git commit -m "refactor: remove unused imports"
# perf,refactor,feat,chore,build,fix,docs,style

git add src
git add Cargo.toml
git commit -m "refactor: windows module remove unused imports"

git add src
git add Cargo.toml
git commit -m "refactor: features module remove unused imports"

git add src
git add Cargo.toml
git commit -m "refactor: features module remove unused files"
# sh -c "rm src/features/*todel*"

git add src
git add Cargo.toml
git commit -m "fix: screenshot color issues"

# 修复创建截图色彩问题
# # fix screenshot color issues

# 修复没有标题问题，导致下面区域出现一段透明区域（有标题区域大小）
# fix no title issue, causing a transparent area below the title area (size of the title area)
git add src
git add Cargo.toml
git commit -m "fix: no title issue, causing a transparent area below the title area (size of the title area)"

git add src/platform/windows/enumeration.rs
git commit -m "refactor: clean up duplicate logic"

git add src
git add Cargo.toml
git commit -m "feat: screenshot support include-titlebar"

git add src
git add Cargo.toml
git commit -m "feat: screenshot support include-titlebar"

git add src
git add Cargo.toml
git commit -m "fix: screenshot support include-titlebar"

# 不带标题截图时正常，带标题截图时标题正常，其他区域为黑色（即不带标题截图时正常的区域变为了黑色）

# 似乎修改了不带标题截图时正常的功能。造成现在不带标题截图时多了标题区域和左侧和上侧有些缝隙。
# 不带标题截图时正常，带标题截图时标题和 不带标题截图时正常区域正常，但是在标题和不带标题截图时正常区域之间有一些黑色缝隙。（时位置偏移？）

# 似乎在修复完之后，在非窗口区域的左、右、下有3个像素左右宽度的黑色区域（0002.png所示）。可以修复？

# 不允许无标题窗口
git add src
git add Cargo.toml
git commit -m "refactor: no title-less windows allowed"


git add scripts
git commit -m "build: add scripts"

git add README.md
git add README.zh.md
git commit -m "docs: add readme"

git add scripts
git commit -m "build: add scripts"

git add Cargo.toml
git commit -m "build: put cargo.toml"

git add .github
git commit -m "build: add workflow"


git add Dockerfile
git commit -m "build: use workdir and healthy-check"

git add Dockerfile.alpine
git commit -m "fix: copy binary file from host machine"

git add Dockerfile*
git commit -m "build: use workdir and healthy-check"

git add docs/镜像管理*
git commit -m "docs: add image management docs"

git add README*.md
git commit -m "docs: put usage"

git add docs/镜像管理*
git commit -m "docs: put image management docs"

git add Dockerfile*
git commit -m "perf: delete unused stage"

git add README*.md
git commit -m "docs: put docker image size"

git add .github/workflows/docker-publish.yml
git commit -m "build: publish to docker hub simple"

git add .github/workflows/docker-publish.yml
git commit -m "build: support debug"

git add .github/workflows/docker-publish.yml
git commit -m "build: add latest tag"

git add .github/workflows/docker-publish.yml
git commit -m "build: set output for debug"

git add .github/workflows/cleanup.yml
git commit -m "build: clean old workflows"


git add .github/workflows/ghcr-publish.yml
git commit -m "build: support ghcr publish"


# gh workflow run docker-publish.yml -f debug_mode=true
# gh run list --workflow=docker-publish.yml
# gh workflow run docker-publish.yml

# gh workflow run ghcr-publish.yml -f debug_mode=true


# gh workflow run window-release.yml -f debug_mode=true
# gh run list --workflow=window-release.yml


#  and switch step for scratch

# put version in Cargo.toml
git add src Cargo.toml
git commit -m "feat: beautify console log"


git add .github/workflows/ghcr-publish.yml
git commit -m "build: tolower github.repository"

git add .github/workflows/ghcr-publish.yml
git commit -m "build: fixed binary file path"

git add .github/workflows/ghcr-publish.yml
git commit -m "build: add debug mode"

git add .github/workflows/docker-publish.yml
git commit -m "build: use github.event.repository.name"

git add .github/workflows/docker-publish.yml
git commit -m "build: make sure debug_mode always has a value"


git add src/main.rs
git commit -m "feat: use --config to specify config file in cli arg"

git add .env.example
git commit -m "build: use config or env for example"

git add src/main.rs
git commit -m "fix: load config from env var ENV_FILE"

git add src/main.rs
git commit -m "feat: use --show-config to show config and exit"

git add src Cargo.toml
git commit -m "feat: use --show-config to show config and exit"

git add ./scripts/*.sh
git commit -m "build: put scripts"

git add Dockerfile.scratch.glibc*
git add Dockerfile.window.gnu*
git commit -m "build: add linux glibc and windows gnu"

git add .github/workflows/window-release.yml
git commit -m "build: add window msvc and gnu release workflow"

git add .github/workflows/next-release.yml
git commit -m "build: add window-msvc,window-gnu,x86_64-unknown-linux-musl release workflow"


git add .github/workflows/*.yml
git commit -m "build: use next-release on version push"

git add .github/workflows/*.yml
git commit -m "build: fix create release"

git add .github/workflows/clean-old-runs-h.yml
git commit -m "build: cleanup old workflow runs with hour unit"

git add .github/workflows/clean-old-runs-h.yml
git commit -m "build: cleanup old workflow runs with hour unit"

git add .github/workflows/clean-old-runs-h.yml
git commit -m "build: use dry_run option"

git add .github/workflows/clean-old-runs-h.yml
git commit -m "build: debug workflow"

git add .github/workflows/clean-old-runs-h.yml
git add .github/workflows/clean-old-runs-d.yml
git add .github/workflows/*.yml
git commit -m "build: use clean-old Daily on schedule"
git commit -m "build: use clean-old Hourly on dispatch"

git add .github/workflows/ghcr-clean-old.yml
git commit -m "build: cleanup old container images"

git add .editorconfig
git commit -m "build: put worflow indent_size"

git add src/main.rs
git commit -m "perf: delete unused code"

git add Cargo.toml
git commit -m "perf: delete unused code"

git add .github/workflows/next-release.yml
git commit -m "build: debug next release"


# git log --oneline
# git push ghg

# gh workflow run next-release.yml -f debug_mode=true
# gh run list --workflow=next-release.yml
# gh run view 18672146462 --log-failed

# gh workflow run clean-old-runs-h.yml
# gh run list --workflow=clean-old-runs-h.yml

# gh workflow run crate-publish-s.yml -f dry_run=true
# gh run list --workflow=crate-publish-s.yml


$ver="0.1.0";

$ver="0.2.0";

$ver="0.3.0";

$ver="0.4.0";

$ver="0.4.1";

git tag -d v$ver;git push ghg :refs/tags/v$ver;

git tag v$ver;git push ghg;git push ghg --tags;


# cargo yank --vers $ver

```

## check before publishing | crate lib
```powershell
cargo fmt;cargo fmt -- --check

cargo clippy -- -D warnings
cargo clippy --all-features -- -D warnings

cargo test --all-features

cargo doc --no-deps --all-features

cargo package --allow-dirty
cargo publish --dry-run --registry crates-io --allow-dirty

# git add Cargo.toml;git commit -m "build: let categories or keywords passed for crate.io";


# git push ghg main
# gh workflow run crate-publish-s.yml -f dry_run=true
# gh run list --workflow=crate-publish-s.yml

# gh workflow run clean-old-runs-d.yml -f days_old=0 -f keep_minimum=3
# gh run list --workflow=clean-old-runs-d.yml

# sh -c "gh api repos/YMC-GitHub/window-enumerator/deployments | jq '.[].id'"
# curl -s "https://crates.io/category_slugs" | jq -r '.category_slugs[]'



# curl -s "https://crates.io/api/v1/crates/toml-path" | jq .

```

## check before publishing | crate bin | docker
```powershell
# based on "check before publishing | crate lib"
# ...

# git push ghg main
# gh workflow run docker-publish.yml -f debug_mode=true
# gh run list --workflow=docker-publish.yml

# git add .github/workflows/docker-publish.yml;git commit -m "build: use push on tags";
# git add .github/workflows/docker-publish.yml;git commit -m "build: off push on tags";

```

## check before publishing | crate bin | window
```powershell
# git add .github/workflows/window-release.yml; git commit -m "build: build window release workflow";
# gh workflow run window-release.yml -f debug_mode=true -f enable_release=false;
# gh run list --workflow=window-release.yml

# git revert <commit-hash>
# git checkout HEAD~2 -- .github/workflows/window-release.yml
# git checkout HEAD -- .github/workflows/window-release.yml

# git ls-files .github/workflows/
# git checkout HEAD -- .github/workflows/

```

## check before publishing | crate bin | macos
```powershell
# sh -c "cp .github/workflows/window-release.yml .github/workflows/macos-release.yml"
# git add .github/workflows/macos-release.yml; git commit -m "build: build macos release workflow";
# gh workflow run macos-release.yml -f debug_mode=true -f enable_release=false;
# gh run list --workflow=macos-release.yml

```

## check before publishing | crate bin | linux
```powershell

# sh -c "cp .github/workflows/window-release.yml .github/workflows/linux-release.yml"
# git add .github/workflows/linux-release.yml; git commit -m "build: build linux release workflow";
# gh workflow run linux-release.yml -f debug_mode=true -f enable_release=false;
# gh run list --workflow=linux-release.yml

```

## check before publishing | crate bin | next-release
```powershell

# git add .github/workflows/next-release.yml; git commit -m "build: build next release workflow";
# git add .github/workflows/next-release.yml; git commit -m "build: turn off upload artifacts when debug_mode=true";
# git add .github/workflows/next-release.yml; git commit -m "build: fix first tag";
# git add .github/workflows/next-release.yml; git commit -m "build: use platforms and build_docker inputs";
# git add .github/workflows/next-release.yml; git commit -m "build: split build_docker and build_linux";
# git add .github/workflows/next-release.yml; git commit -m "build: upload binary parent path for linux-static-binary";
# git add .github/workflows/next-release.yml; git commit -m "build: use release to replace debug_mode";
# git add .github/workflows/next-release.yml; git commit -m "build: fix secrets passing error";
# git add .github/workflows/next-release.yml; git commit -m "build: use lower name for docker image";
# git add .github/workflows/next-release.yml; git commit -m "build: fix for github workflow support";
# git add .github/workflows/next-release.yml; git commit -m "build: fix syntax error near unexpected token";
# git add .github/workflows/next-release.yml; git commit -m "build: shim docker build jobs";
# git add .github/workflows/*.yml; git commit -m "build: rename and push on tags";
# git add .github/workflows/next-release.yml; git commit -m "build: use docker_registries=ghcr.io,docker.io";
# git add .github/workflows/next-release.yml; git commit -m "build: fix flags for tasg push";
# git add .github/workflows/next-release.yml; git commit -m "build: fix empty release binary files";
# git add .github/workflows/next-release.yml; git commit -m "build: use upx,strip to minify binary files";
# git add .github/workflows/next-release.yml; git commit -m "build: fix syntax error";
# git add .github/workflows/next-release.yml; git commit -m "build: add debug all outputs step";
# git add .github/workflows/next-release.yml; git commit -m "build: fix build_docker always skip";
# git add .github/workflows/next-release.yml; git commit -m "build:  build_docker for linux/amd64";
# git add .github/workflows/next-release.yml; git commit -m "build:  fix build_window";
# git add .github/workflows/next-release.yml; git commit -m "build:  fix build_macos";

# 

# git push ghg main
# gh workflow run next-release.yml -f debug_mode=true;
# gh workflow run next-release.yml -f debug_mode=true -f platforms="windows,linux,macos" -f build_docker=true;
# gh workflow run next-release.yml -f debug_mode=true -f platforms="none" -f build_docker=true;
# gh workflow run next-release.yml -f debug_mode=true -f platforms="windows" -f build_docker=false;
# gh workflow run next-release.yml -f debug_mode=true -f platforms="macos" -f build_docker=false;
# gh workflow run next-release.yml -f debug_mode=true -f platforms="linux" -f build_docker=false;

# gh workflow run next-release.yml -f release=false -f platforms="none" -f build_docker=true;
# gh workflow run next-release.yml -f release=false -f platforms="windows" -f build_docker=false;
# gh workflow run next-release.yml -f release=false -f platforms="macos" -f build_docker=false;
# gh workflow run next-release.yml -f release=false -f platforms="linux" -f build_docker=false;
# gh workflow run next-release.yml -f release=false -f platforms="windows,linux,macos" -f build_docker=true;
# gh workflow run next-release.yml -f release=true -f platforms="windows,linux,macos" -f build_docker=true;


#$id=gh run list --workflow=next-release.yml --json databaseId -q '.[0].databaseId';gh run cancel $id;

# gh run list --workflow=next-release.yml
```



## check before release | github release

```powershell

# gh workflow run window-release.yml -f debug_mode=true -f enable_release=false;
# gh run list --workflow=window-release.yml

# git add .github/workflows/macos-release.yml; git add .github/workflows/window-release.yml;  git commit -m "build: fix enable_release condition";


# git add .github/workflows/platform-release.yml; git commit -m "build: debug platform-release workflow";
# git push ghg main


# gh workflow run platform-release.yml -f platforms="windows,linux,macos" -f architectures="x86_64" -f enable_release=false -f debug_mode=true
# gh run list --workflow=platform-release.yml

# gh workflow run platform-release.yml -f platforms="windows" -f architectures="x86_64" -f enable_release=false -f debug_mode=true -f dry_run=true;

# gh workflow run platform-release.yml -f platforms="macos" -f architectures="x86_64" -f enable_release=false -f debug_mode=true

# gh workflow run platform-release.yml -f platforms="linux" -f architectures="aarch64,armv7" -f enable_release=false -f debug_mode=true
# gh run list --workflow=platform-release.yml

# git add .github/workflows/platform-release.yml;git commit -m "build: use push on tags";

# git add .github/workflows/platform-release.yml;git commit -m "build: off push on tags";
# git add .github/workflows/platform-release.yml;git commit -m "build: disable all";


```

## bump version | 1
```powershell
$ver="0.1.0";

$ver="0.2.0";

$ver="0.3.0";

$ver="0.4.0";

$ver="0.4.1";

git add Cargo.toml;git add README*.md;git commit -m "bump version v$ver";
```

## bump version | 2
```powershell
$ver=sh -c "date +%Y%m%d";$ver;
# $ver="$ver-debug";$ver;
$ver="$ver-fix1";$ver;
```

## commit changed | 1
```bash
git add Cargo.toml;git add README*.md;git commit -m "bump version v$ver";

# git add Cargo.toml;git add README*.md;git commit -m "v$ver";
```

## publish to github | 1
```powershell
# del
git tag -d v$ver;git push ghg :refs/tags/v$ver;
# add 
git tag v$ver;git push ghg;git push ghg --tags;

```
## publish to github | 2
```powershell
# del
git tag -d $ver;git push ghg :refs/tags/$ver;
# add
git tag $ver ;git push ghg;git push ghg $ver;

# gh workflow run next-release.yml -f release=true -f platforms="linux,windows,macos" -f build_docker=true -f docker_registries="ghcr.io,docker.io"
# cargo yank --vers $ver

```

## list workflow status
```powershell
# git log --oneline -n 5

gh run list --workflow=crate-publish-s.yml

gh run list --workflow=next-release.yml
```